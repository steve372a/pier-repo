<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Pier Repo - å®æ—¶ç´¢å¼•é¢„è§ˆ</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; max-width: 900px; margin: 40px auto; padding: 0 20px; color: #24292e; background: #ffffff; }
        h1 { display: flex; align-items: center; border-bottom: 1px solid #eaecef; padding-bottom: 10px; }
        .badge { font-size: 12px; background: #2ea44f; color: white; padding: 2px 8px; border-radius: 10px; margin-left: 10px; }
        .card { border: 1px solid #e1e4e8; border-radius: 6px; padding: 16px; margin-bottom: 20px; background: #f6f8fa; }
        .stats { font-weight: bold; color: #0366d6; }
        pre { background: #1b1f23; color: #e1e4e8; padding: 16px; border-radius: 6px; overflow: auto; font-size: 14px; line-height: 1.45; max-height: 500px; }
        a { color: #0366d6; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>ğŸ“¦ Pier è½¯ä»¶ä»“åº“ <span class="badge">å·²è”ç½‘</span></h1>
    
    <div class="card">
        <p>ğŸ“Š <strong>ä»“åº“ç»Ÿè®¡ï¼š</strong> <span id="pkg-count" class="stats">è¯»å–ä¸­...</span> ä¸ªè½¯ä»¶åŒ…</p>
        <p>ğŸ”— <strong>åŸå§‹æ–‡ä»¶ï¼š</strong> 
            [ <a href="db.sque" target="_blank">db.sque</a> ] 
            [ <a href="dbm.sque" target="_blank">dbm.sque</a> ]
        </p>
    </div>

    <h3>ğŸ” ç´¢å¼•å®æ—¶é¢„è§ˆ (db.sque)</h3>
    <pre id="preview">æ­£åœ¨è¿æ¥è‡³ GitHub Pages å¹¶è§£ææ•°æ®...</pre>

    <script>
        // 1. è¯»å–æ€»æ•°æ–‡ä»¶ dbm.sque
        fetch('dbm.sque')
            .then(res => res.text())
            .then(count => {
                document.getElementById('pkg-count').textContent = count.trim();
            })
            .catch(() => document.getElementById('pkg-count').textContent = 'N/A');

        // 2. è¯»å–ç´¢å¼•æ˜ç»† db.sque
        fetch('db.sque')
            .then(response => {
                if (!response.ok) throw new Error('ç´¢å¼•æ–‡ä»¶å°šæœªç”Ÿæˆï¼Œè¯·æ£€æŸ¥ Actions è¿è¡ŒçŠ¶æ€');
                return response.text();
            })
            .then(data => {
                // å±•ç¤ºå†…å®¹ï¼Œå¹¶å°† \r\n æ¸²æŸ“ä¸ºå¯è§æ¢è¡Œ
                document.getElementById('preview').textContent = data;
            })
            .catch(err => {
                document.getElementById('preview').textContent = 'âŒ è¯»å–å¤±è´¥: ' + err.message;
            });
    </script>
</body>
</html>
